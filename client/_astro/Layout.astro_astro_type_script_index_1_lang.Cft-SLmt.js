/* empty css                        */class n{constructor(){this.processedBlocks=new WeakSet,this.observer=null,this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.setupCodeBlocks()):this.setupCodeBlocks(),this.observePageChanges()}setupCodeBlocks(){requestAnimationFrame(()=>{document.querySelectorAll(".expressive-code").forEach((o,t)=>{this.processedBlocks.has(o)||(this.wrapCodeBlock(o,t),this.processedBlocks.add(o))})})}wrapCodeBlock(e,o){if(e.closest(".code-block-wrapper"))return;const t=this.getCodeLanguage(e),s=document.createElement("div");s.className="code-block-wrapper",s.setAttribute("data-code-block-id",o);const a=this.createCollapseHeader(t,o),l=document.createElement("div");l.className="code-content expanded",l.setAttribute("data-content-id",o),e.parentNode.insertBefore(s,e),s.appendChild(a),s.appendChild(l),l.appendChild(e),this.bindCollapseEvents(s,o)}createCollapseHeader(e,o){const t=document.createElement("div");return t.className="code-collapse-header",t.setAttribute("data-header-id",o),t.innerHTML=`
      <div class="code-block-title">
        <span class="code-block-language">${e}</span>
        <span class="code-collapse-indicator">点击折叠/展开代码</span>
      </div>
      <button class="code-collapse-button" type="button" aria-label="折叠/展开代码块">
        <span class="collapse-text">折叠</span>
        <svg class="code-collapse-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    `,t}bindCollapseEvents(e,o){const t=e.querySelector(".code-collapse-header"),s=e.querySelector(".code-content");e.querySelector(".code-collapse-button");const a=e.querySelector(".code-collapse-icon"),l=e.querySelector(".collapse-text"),r=e.querySelector(".code-collapse-indicator"),i=c=>{c.target.closest(".code-collapse-button")&&c.preventDefault(),this.toggleCollapse(s,a,l,r)};t.addEventListener("click",i,{passive:!1}),t.addEventListener("keydown",c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),this.toggleCollapse(s,a,l,r))}),t.setAttribute("tabindex","0"),t.setAttribute("role","button"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls",`code-content-${o}`),s.setAttribute("id",`code-content-${o}`)}toggleCollapse(e,o,t,s){const a=e.classList.contains("collapsed");requestAnimationFrame(()=>{a?(e.classList.remove("collapsed"),e.classList.add("expanded"),o.classList.remove("collapsed"),t.textContent="折叠",s.textContent="点击折叠代码",e.parentElement.querySelector(".code-collapse-header").setAttribute("aria-expanded","true")):(e.classList.remove("expanded"),e.classList.add("collapsed"),o.classList.add("collapsed"),t.textContent="展开",s.textContent="点击展开代码",e.parentElement.querySelector(".code-collapse-header").setAttribute("aria-expanded","false"))});const l=new CustomEvent("codeBlockToggle",{detail:{collapsed:!a,element:e.parentElement}});document.dispatchEvent(l)}getCodeLanguage(e){const o=[()=>e.getAttribute("data-language"),()=>e.querySelector("[data-language]")?.getAttribute("data-language"),()=>e.className.match(/language-(\w+)/)?.[1],()=>e.querySelector("code")?.className.match(/language-(\w+)/)?.[1],()=>e.querySelector(".frame")?.getAttribute("data-language")];for(const t of o){const s=t();if(s)return this.formatLanguageName(s)}return"Code"}formatLanguageName(e){return{js:"JavaScript",ts:"TypeScript",py:"Python",cpp:"C++",c:"C",java:"Java",html:"HTML",css:"CSS",scss:"SCSS",sass:"Sass",json:"JSON",xml:"XML",yaml:"YAML",yml:"YAML",md:"Markdown",sh:"Shell",bash:"Bash",zsh:"Zsh",fish:"Fish",powershell:"PowerShell",sql:"SQL",php:"PHP",rb:"Ruby",go:"Go",rust:"Rust",swift:"Swift",kotlin:"Kotlin",dart:"Dart",vue:"Vue",svelte:"Svelte",astro:"Astro"}[e.toLowerCase()]||e.toUpperCase()}observePageChanges(){if(this.observer)return;let e=null;this.observer=new MutationObserver(o=>{let t=!1;o.forEach(s=>{s.type==="childList"&&s.addedNodes.forEach(a=>{a.nodeType===Node.ELEMENT_NODE&&a.querySelector&&a.querySelector(".expressive-code")&&(t=!0)})}),t&&(clearTimeout(e),e=setTimeout(()=>this.setupCodeBlocks(),150))}),this.observer.observe(document.body,{childList:!0,subtree:!0})}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.processedBlocks=new WeakSet}collapseAll(){document.querySelectorAll(".code-content.expanded").forEach(o=>{const t=o.closest(".code-block-wrapper"),s=t.querySelector(".code-collapse-icon"),a=t.querySelector(".collapse-text"),l=t.querySelector(".code-collapse-indicator");this.toggleCollapse(o,s,a,l)})}expandAll(){document.querySelectorAll(".code-content.collapsed").forEach(o=>{const t=o.closest(".code-block-wrapper"),s=t.querySelector(".code-collapse-icon"),a=t.querySelector(".collapse-text"),l=t.querySelector(".code-collapse-indicator");this.toggleCollapse(o,s,a,l)})}}const d=new n;window.CodeBlockCollapser=n;window.codeBlockCollapser=d;window.swup&&window.swup.hooks.on("page:view",()=>{setTimeout(()=>{d.setupCodeBlocks()},100)});
